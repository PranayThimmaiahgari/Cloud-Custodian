policies:
  - name: s3-empty-buckets-48hrs
    resource: s3
    description: |
      Fetch S3 buckets that have been empty (no objects in them) for more than 48 hours.
    filters:
      - type: value
        key: CreationDate
        value_type: age
        op: less-than
        value: 2
      - type: metrics
        name: NumberOfObjects
        value: 0
        statistics: Average
        days: 2
    actions:
      - type: notify
        template: default
        priority_header: '2'
        subject: testing the c7n mailer
        to:
          - charithasivavenkata.kanuri@hitachids.com
        format: json
        transport:
          type: sns
          topic: arn:aws:sns:us-east-1:674167431508:Charitha_CloudCustodian
